You can use regex in the output sections.
More info here: https://github.com/manticoresoftware/clt#refine
Time taken for test: 63705ms
––– input –––
(dockerd > /var/log/dockerd.log 2>&1 &) > /dev/null
––– output –––
––– duration: 3ms (0.00%) –––
––– input –––
if timeout 60 grep -qm1 'API listen on /var/run/docker.sock' <(tail -n 0 -f /var/log/dockerd.log); then echo 'Done'; else echo 'Timeout failed'; fi
––– output –––
Done
––– duration: 2015ms (3.16%) –––
––– input –––
docker ps
––– output –––
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
––– duration: 41ms (0.06%) –––
––– input –––
docker build --build-arg="DEV=1" -t manticoresoftware/manticore:current /docker/ > /dev/null 2>&1; echo $?
––– output –––
0
––– duration: 60254ms (94.58%) –––
––– input –––
docker run -d -e CREATE_PLAIN_TABLES=1 --name manticore -v $(pwd)/clt_tests/tests/base/manticore-indexer-all.conf:/etc/manticoresearch/manticore.conf manticoresoftware/manticore:current
––– output –––
3d57d33a2d7b0f323a1146914bc547cde2db7d104418274b139eef7e3609683f
––– duration: 760ms (1.19%) –––
––– input –––
if timeout 5 grep -qm1 'accepting connections' <(docker logs -f manticore); then echo 'accepting connections'; else echo 'Manticore failed to start properly in 10 seconds'; fi
––– output –––
accepting connections
––– duration: 521ms (0.82%) –––
––– input –––
docker exec manticore mysql -e "SHOW TABLES\G;"
––– output –––
*************************** 1. row ***************************
Index: idx1
Type: local
––– duration: 49ms (0.08%) –––
––– input –––
docker exec manticore mysql -e "SELECT * FROM idx1\G;"
––– output –––
*************************** 1. row ***************************
id: 1
f: abc
*************************** 2. row ***************************
id: 2
f: abc
*************************** 3. row ***************************
id: 3
f: abc abc
––– duration: 62ms (0.10%) –––
